<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>work02</title>
<script src="//cdn.jsdelivr.net/npm/phaser@3.50.0/dist/phaser.js"></script>
<style>
* {
    margin: 0;
    padding: 0;
}
html, body {
    height: 100%;
    overflow: hidden;
}
</style>
<script>
var mainScene = new Phaser.Scene('MainScene');

mainScene.preload = function() {
    // スプライト画像の読み込み
    this.load.spritesheet('heart', './../assets/images/heart.png',{
        frameWidth : 150,
        frameHeight : 150,
    });
    this.load.spritesheet('flares', './../assets/images/flares.png',{
        frameWidth : 128,
        frameHeight : 128,
    });
    this.load.image('bubble', './../assets/images/bubble.png');
}

mainScene.create = function() {
    // 左側のパーティクル作成
    this.createParticle1();
    // 右側のパーティクル作成
    this.createParticle2();
    this.createParticle3();
    this.createParticle4();
    this.createParticle5();
    this.createParticle6();
};

mainScene.createParticle1 = function() {
    // 左側のパーティクル作成
    var x=this.game.config.width/3;
    //y座標は画面下部
    var y=this.game.config.height;
    
    //パーティクル作成
    var particles=this.add.particles("heart");
    //エミッター起動
    var emitter=particles.createEmitter({
        x:x,
        y:y,
        framespeed:[0,1,2,3],
        speed:{min:500,max:900},
        scale:{min:0.08,max:0.1},
        angle:{min:-60,max:-120},
        quantity:2,
        rotate:{min:120,max:360},
        gravityY:150,
        frequency:200,
        lifespan:4000,
        delay:1300,
        blendMode:'COLOR'
    });
};

mainScene.createParticle2 = function() {
    // 右側のパーティクル作成
    // X座標は画面の2/3の位置
    var x = this.game.config.width / 3 * 3;
    // Y座標は画面下部
    var y = this.game.config.height;
    
    // パーティクル作成
    var particles = this.add.particles('heart');
    // エミッター起動
    var emitter = particles.createEmitter({
        x: y,
        y: x,
        frame : [4, 5, 6, 7],
        speed: { min: 700, max: 1000 },
        scale: { min: 0.3, max: 0.6 },
        angle: { min: 60, max: -180 },
        rotate: { min: 0,  max: 360},
        gravityY : 10,
        quantity:10,
        frequency : 50,
        lifespan: 4000,
        alpha:5,
        blendMode:'COLOR'
    });
};
mainScene.createParticle3 = function() {
    // 左側のパーティクル作成
    var x=this.game.config.width/3;
    //y座標は画面下部
    var y=this.game.config.height;
    
    //パーティクル作成
    var particles=this.add.particles("heart");
    //エミッター起動
    var emitter=particles.createEmitter({
        x:y,
        y:y,
        framespeed:[0,1,2,3],
        speed:{min:500,max:900},
        scale:{min:0.08,max:0.1},
        angle:{min:-60,max:-120},
        quantity:2,
        rotate:{min:120,max:360},
        gravityY:80,
        frequency:90,
        lifespan:4000,
        delay:1300,
        alpha:0,
        blendMode:'ADD'
    });
};
mainScene.createParticle4 = function() {
    // 左側のパーティクル作成
    var x=this.game.config.width/3*2;
    //y座標は画面下部
    var y=this.game.config.height;
    
    //パーティクル作成
    var particles=this.add.particles("heart");
    //エミッター起動
    var emitter=particles.createEmitter({
        x:x,
        y:y,
        framespeed:[4,5,6,7],
        speed:{min:500,max:900},
        scale:{min:0.08,max:0.1},
        angle:{min:-60,max:-120},
        quantity:2,
        lifespan:2,
        rotate:{min:120,max:360},
        gravityY:80,
        frequency:200,
        lifespan:4000,
        delay:1300,
        blendMode:'COLOR'
    });
};
var config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    backgroundColor: '#333333',
    physics: {
        default: 'arcade',
        arcade: {
            debug: true,
        }
    },
    scene: [mainScene],
};

var game = new Phaser.Game(config);

window.addEventListener("resize", (event) => {
    game.scale.resize(window.innerWidth, window.innerHeight);
},false);
mainScene.create = function() {
    // パーティクル作成
    this.createParticle();
};

mainScene.createParticle6 = function() {
    // パーティクル作成
    var particles = this.add.particles('bubble');
    var x=this.game.config.width/3*2;
    //y座標は画面下部
    var y=this.game.config.height;
    // エミッター起動
    var emitter = particles.createEmitter({
 
        emitZone: { source: emitZone },
        speed: { min: -20, max: 20 },
        scale: { min: 0.1, max: 0.5 },
        rotate: { min: 0,  max: 360},
        alpha: { start: 1, end: 0 },
        frequency : 50,
        lifespan: 2000,
        blendMode: 'COLOR',
    });
};
mainScene.create = function() {
    // パーティクル作成
    this.createParticle();
};

mainScene.createParticle5= function() {
    // 画面幅
    var width = this.game.config.width;
    // 画面高さ
    var height = this.game.config.height;

    // パーティクル作成
    var particles = this.add.particles('flares');
    // エミッター起動
    var emitter = particles.createEmitter({
        frame : [0, 1, 2, 3, 4, 5],
        emitZone: { source: emitZone },
        speed: { min: -20, max: 20 },
        scale: { min: 1.2, max: 1.4 },
        alpha: { start: 1, end: 0 },
        frequency : 50,
        quantity:20,
        lifespan: 100,
        blendMode: 'COLOR',
    });
};
</script>
</head>
<body>
</body>
</html>

